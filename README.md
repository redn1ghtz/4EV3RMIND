# 4EV3RMIND
* [Описание проекта](#chapter-0)
* [Особенности](#chapter-1)
* [Конфигурация](#chapter-2)
* [Установка и настройка](#chapter-3)
* [Использование](#chapter-4)

<a id="chapter-0"></a>
## Описание проекта
**4EV3RIND** - программа для робота [LEGO MINDSTORMS EV3 31313] (https://www.lego.com/de-lu/product/lego-mindstorms-ev3-31313), которая позволяет подключить нейросеть для управления и взаимодействия с роботом. Поддержка пользовательских команд и вопросов, также есть автономный режим, в котором робот сам разговаривает и выполняет действия. Основан на EV3RSTORM.

<a id="chapter-1"></a>
## Особенности

* **Полная поддержка русского языка** - вся система, все команды и ответы на русском языке
* **Полное управление нейросетью** - все решения принимает Gemini AI (модель gemma-3-27b-it)
* **Автономное поведение** - робот сам принимает решения в заданном периоде времени
* **Голосовое общение** - синтез речи на русском языке через espeak
* **Интерактивный терминал** - можно давать команды через SSH
* **Последовательности действий** - нейросеть может планировать сложные сценарии

**Один вывод реле подключаем к 220v, второй к нагревателю и соединяем оставшийся свободный провод нагревателя с 220v!**

___ВНИМАНИЕ!___ Если показания температуры неверны, то подключите термистор вместе с резистором к пину ___3.3v___, вместо 5v!

<a id="chapter-2"></a>
## Конфигурация
* **Робот EV3RSTORM**
* **Совместимый WI-FI адаптер** - например, Netgear WNA1100
* **micro-SD карта** - на ней нужно иметь установленный образ [ev3dev] (https://www.ev3dev.org/)
Моторы и датчики подключаются в соответствии с официальной инструкцией по сборке **EV3RSTORM**. Левый мотор (LargeMotor): порт B, Правый мотор (LargeMotor): порт C, Мотор с лезвием (MediumMotor): порт A, ИК датчик: порт 4, Датчик цвета: порт 3, Кнока (Touch Sensor): порт 1, также **рекомендуется** подключить гироскоп (стрелки должны быть сверху при установке): порт 2.

<a id="chapter-3"></a>
## Установка
1) Установите последний выпуск [ev3dev] (https://www.ev3dev.org/)
2) Подключитесь к интернету через настройки системы
3) Подключитесь по SSH с компьютера к роботу (пароль: maker):
```bash
ssh robot@ev3dev
```
4) Склонируйте репозиторий и перейдите в папку с проектом:
```bash
wget https://github.com/redn1ghtz/4EV3RMIND.git
cd 4EV3RMIND
```
5) Предоставьте права на выполение файла **pre-install.sh** и запустите его:
```bash
chmod +x pre-install.sh
sudo ./pre-install.sh
```
6) Запустится пред-установщик, который добавит необходимый репозиторий и запустит обновление системы. После этого система автоматически перезагрузится и Вам необходимо снова подключиться по SSH к роботу.

7) После загрузки системы перейдите в каталог проекта:
```bash
cd 4EV3RMIND
```
8) Запустите установщик (он установит необходимые зависимости и настроит русский язык в системе). После завершения установки система робота будет перезагружена автоматически. Установка занимает 20-30 минут при хорошем интернет соединении:
```bash
sudo ./install.sh
```
9) С помощью vi отредактируйте конфигурационный файл:
```bash
vi 4EV3RMIND/config.py
```
GEMINI_API_KEY = "your-google-api-key" вместо your-google-api-key вставьте Ваш API-ключ, полученный на [сайте](https://aistudio.google.com/api-keys)
#### Основные настройки
```python
GEMINI_API_KEY = "your_api_key"     # Ключ Gemini API
USE_GYRO = True                     # Использовать гироскоп (True/False)
AUTONOMOUS_MODE = True              # Автономное поведение
```
#### Безопасность
```python
MAX_MOTOR_SPEED = 75                # Макс. скорость моторов
OBSTACLE_DISTANCE = 25              # Расстояние до препятствия (см)
```
#### Лимиты
```python
DAILY_REQUEST_LIMIT = 14400         # Запросов в день
MAX_SEQUENCE_ACTIONS = 5            # Макс. действий в последовательности
```
___Остальные настройки не рекомендуется изменять неопытным пользователям!___

10) Готово! Для запуска программы используйте:
```bash
cd 4EV3RMIND
sudo ./run.sh
``` 

<a id="chapter-4"></a>
## Использование
* Робот находится в автономном режиме, для отправки команды или вопроса введите в терминал и нажмите Enter.
* Для выхода из программы нажмите кнопку отмены на блоке **EV3** / нажмите Ctrl+C / введите команду **выход**, **exit**, **quit**
